<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Asterisk Website</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="css/styles.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <style>
    input,
    textarea,
    button {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 16px;
      color: #333;
    }
  </style>
  <body class="d-flex flex-column h-100">
    <main class="flex-shrink-0">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container px-5">
          <a class="navbar-brand" href="index.html">Discover Asterisk</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link" href="index.html">Home</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <header class="bg-dark py-5">
        <div class="container px-5">
          <div class="row gx-5 align-items-center justify-content-center">
            <div class="col-lg-8 col-xl-7 col-xxl-6">
              <div class="my-5 text-center text-xl-start">
                <h1 class="display-5 fw-bolder text-white mb-2">
                  게임 한 줄 소개
                </h1>
                <p class="lead fw-normal text-white-50 mb-4">
                  A Simulation Rougelike Game about
                </p>
                <div
                  class="d-grid gap-3 d-sm-flex justify-content-sm-center justify-content-xl-start"
                >
                  <a
                    class="btn btn-primary btn-lg px-4 me-sm-3"
                    href="#features"
                    >Get Started</a
                  >
                  <!-- <a class="btn btn-outline-light btn-lg px-4" href="#!"
                    >Learn More</a
                  > -->
                </div>
              </div>
            </div>
            <div class="col-xl-5 col-xxl-6 d-none d-xl-block text-center">
              <img
                class="img-fluid rounded-3 my-5"
                src="https://dummyimage.com/600x400/343a40/6c757d"
                alt="..."
              />
            </div>
          </div>
        </div>
      </header>
      <section class="py-5" id="features">
        <div class="container px-5 my-5">
          <div class="row gx-5">
            <div class="col-lg-4 mb-5 mb-lg-0">
              <h2 class="fw-bolder mb-0">A better way to start building.</h2>
            </div>
            <div class="col-lg-8">
              <div class="row gx-5 row-cols-1 row-cols-md-2">
                <div class="col mb-5 h-100">
                  <div
                    class="feature bg-primary bg-gradient text-white rounded-3 mb-3"
                  >
                    <i class="bi bi-collection"></i>
                  </div>
                  <h2 class="h5">Featured title</h2>
                  <p class="mb-0">
                    Paragraph of text beneath the heading to explain the
                    heading. Here is just a bit more text.
                  </p>
                </div>
                <div class="col mb-5 h-100">
                  <div
                    class="feature bg-primary bg-gradient text-white rounded-3 mb-3"
                  >
                    <i class="bi bi-building"></i>
                  </div>
                  <h2 class="h5">Featured title</h2>
                  <p class="mb-0">
                    Paragraph of text beneath the heading to explain the
                    heading. Here is just a bit more text.
                  </p>
                </div>
                <div class="col mb-5 mb-md-0 h-100">
                  <div
                    class="feature bg-primary bg-gradient text-white rounded-3 mb-3"
                  >
                    <i class="bi bi-toggles2"></i>
                  </div>
                  <h2 class="h5">Featured title</h2>
                  <p class="mb-0">
                    Paragraph of text beneath the heading to explain the
                    heading. Here is just a bit more text.
                  </p>
                </div>
                <div class="col h-100">
                  <div
                    class="feature bg-primary bg-gradient text-white rounded-3 mb-3"
                  >
                    <i class="bi bi-toggles2"></i>
                  </div>
                  <h2 class="h5">Featured title</h2>
                  <p class="mb-0">
                    Paragraph of text beneath the heading to explain the
                    heading. Here is just a bit more text.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <div class="py-5 bg-light">
        <div class="container px-5 my-5">
          <div class="row gx-5 justify-content-center">
            <div class="col-lg-10 col-xl-7">
              <div class="text-center">
                <div class="fs-4 mb-4 fst-italic">
                  "Working with Start Bootstrap templates has saved me tons of
                  development time when building new projects! Starting with a
                  Bootstrap template just makes things easier!"
                </div>
                <div class="d-flex align-items-center justify-content-center">
                  <img
                    class="rounded-circle me-3"
                    src="https://dummyimage.com/40x40/ced4da/6c757d"
                    alt="..."
                  />
                  <div class="fw-bold">
                    Tom Ato
                    <span class="fw-bold text-primary mx-1">/</span>
                    CEO, Pomodoro
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <center>
      <p>이메일을 남겨주시면 서비스가 런칭되었을 때 알림을 드리겠습니다.</p>
      <input
        id="submit-email"
        type="email"
        placeholder="알림을 받으실 이메일"
      />
      <br /><br />
      <p>서비스가 이렇게 되었으면 좋겠다는 조언을 해 주세요</p>
      <textarea
        id="submit-advice"
        name="Text1"
        cols="40"
        rows="5"
        placeholder="서비스에 대한 조언을 남겨주세요"
      ></textarea
      ><br />
      <button style="width: 350px" id="submit">지금 제출!</button>
    </center>
    <footer class="bg-dark py-4 mt-auto">
      <div class="container px-5">
        <div
          class="row align-items-center justify-content-between flex-column flex-sm-row"
        >
          <div class="col-auto">
            <div class="small m-0 text-white">Copyright &copy; Asterisk</div>
          </div>
          <div class="col-auto">
            <!-- <a class="link-light small" href="#!">Privacy</a>
            <span class="text-white mx-1">&middot;</span>
            <a class="link-light small" href="#!">Terms</a>
            <span class="text-white mx-1">&middot;</span>
            <a class="link-light small" href="#!">Contact</a> -->
          </div>
        </div>
      </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/scripts.js"></script>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/gh/dinoqqq/simple-popup@master/dist/jquery.simple-popup.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/gh/dinoqqq/simple-popup@master/dist/jquery.simple-popup.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <script type="application/javascript">
      var ip = "null";
      function getIP(json) {
        console.log(json);
        try {
          ip = json.ip;
        } catch (e) {
          ip = "unknown";
        }
        return;
      }
    </script>
    <script
      type="application/javascript"
      src="https://jsonip.com?format=jsonp&callback=getIP"
    ></script>
    <script>
      // UTM 파라미터 가져오기
      var queryString = location.search;
      const urlParams = new URLSearchParams(queryString);
      const utm = urlParams.get("utm");

      // 디바이스 타입 확인
      var mobile = "desktop";
      if (
        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
          navigator.userAgent
        )
      ) {
        // mobile device인 경우 true
        mobile = "mobile";
      }

      // 쿠키에서 값을 가져오는 함수
      function getCookieValue(name) {
        const value = "; " + document.cookie;
        const parts = value.split("; " + name + "=");
        if (parts.length === 2) {
          return parts.pop().split(";").shift();
        }
      }

      // 쿠키에 값을 저장하는 함수
      function setCookieValue(name, value, days) {
        let expires = "";
        if (days) {
          const date = new Date();
          date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
          expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "") + expires + "; path=/";
      }

      function getUVfromCookie() {
        // 6자리 임의의 문자열 생성
        const hash = Math.random().toString(36).substring(2, 8).toUpperCase();
        // 쿠키에서 기존 해시 값을 가져옴
        const existingHash = getCookieValue("user");
        // 기존 해시 값이 없으면, 새로운 해시 값을 쿠키에 저장
        if (!existingHash) {
          setCookieValue("user", hash, 180); // 쿠키 만료일은 6개월
          return hash;
        } else {
          // 기존 해시 값이 있으면, 기존 값을 반환
          return existingHash;
        }
      }

      // Sam pading value to start with 0. eg: 01, 02, .. 09, 10, ..
      function padValue(value) {
        return value < 10 ? "0" + value : value;
      }

      function getTimeStamp() {
        const date = new Date();

        const year = date.getFullYear();
        const month = date.getMonth() + 1;
        const day = date.getDate();
        const hours = date.getHours();
        const minutes = date.getMinutes();
        const seconds = date.getSeconds();

        const formattedDate = `${padValue(year)}-${padValue(month)}-${padValue(
          day
        )} ${padValue(hours)}:${padValue(minutes)}:${padValue(seconds)}`;

        return formattedDate;
      }

      addrScript =
        "https://script.google.com/macros/s/AKfycbzJwgFBbPRevLppctrVqrAzy6uuPjKQXMnxf9gr8a1Jy_Prf2ESQNGVOVd3V4pSDRV8UQ/exec";

      var data = JSON.stringify({
        id: getUVfromCookie(),
        landingUrl: window.location.href,
        ip: ip,
        referer: document.referrer,
        time_stamp: getTimeStamp(),
        utm: utm,
        device: mobile,
      });

      $(document).ready(function () {
        $("#submit").on("click", function () {
          const email = $("#submit-email").val();
          const advice = $("#submit-advice").val();

          function validateEmail(email) {
            var re =
              /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
            return re.test(email);
          }

          if (email == "" || !validateEmail(email)) {
            alert("이메일이 유효하지 않아 알림을 드릴 수가 없습니다. ");
            return;
          }
          $.busyLoadFull("show");

          var finalData = JSON.stringify({
            id: getUVfromCookie(),
            email: email,
            advice: advice,
          });

          $.busyLoadFull("show");
          axios
            .get(
              addrScript + "?action=insert&table=tab_final&data=" + finalData
            )
            .then((response) => {
              console.log(response.data.data);
              alert(JSON.stringify(response));
              $("#submit-email").val("");
              $("#submit-advice").val("");

              $.busyLoadFull("hide");
              $.fn.simplePopup({ type: "html", htmlSelector: "#popup" });
            });
        });
      });

      axios
        .get(addrScript + "?action=insert&table=visitors&data=" + data)
        .then((response) => {
          console.log(JSON.stringify(response));
        })
        .catch((error) => {
          if (error.response) {
            // 서버가 2xx 범위를 벗어난 상태 코드로 응답한 경우
            console.log(error.response.data);
            console.log(error.response.status);
            console.log(error.response.headers);
          } else if (error.request) {
            // 요청이 전송되었지만 응답을 받지 못한 경우
            console.log(error.request);
          } else {
            // 요청 설정 중에 오류가 발생한 경우
            console.log("Error", error.message);
          }
          console.log(error.config);
        });
    </script>
    <!-- <center>
      <iframe
        type="text/html"
        width="315"
        height="560"
        src="https://www.youtube.com/embed/QHgyX24kOSE?autoplay=1"
        title="대한민국 대학생들이 만든 레전드 광고 ㅋㅋㅋ"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin"
        allowfullscreen
      ></iframe>
    </center> -->
    <div id="popup" style="display: none">
      <h1>감사합니다.</h1>
      <p>이제는 우리는 같은 배를 탔습니다.</p>
    </div>
  </body>
</html>
